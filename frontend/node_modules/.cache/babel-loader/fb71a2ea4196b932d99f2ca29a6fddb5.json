{"ast":null,"code":"var http = require('http'),\n  url = require('url');\nfunction encodeOpts(opts) {\n  return '&' + Object.keys(opts).map(function (key) {\n    return key + '=' + encodeURIComponent(opts[key]);\n  }).join('&') + '&format=json' + '&nojsoncallback=1';\n}\nvar Flickr = {\n  request: function request(method, params, outStream) {\n    if (!params || !params.api_key) throw new Error('valid Flickr API key needed!');\n    var req = http.request(Flickr.httpUrl + '?method=' + encodeURIComponent(method) + encodeOpts(params), function (res) {\n      res.pipe(outStream);\n    });\n    req.end();\n    return req;\n  }\n};\n\n// api constants\nFlickr.httpUrl = 'http://api.flickr.com/services/rest';\nFlickr.httpsUrl = 'https://secure.flickr.com/services/rest';\nmodule.exports = Flickr;","map":null,"metadata":{},"sourceType":"script"}